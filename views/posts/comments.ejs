<%- include('../partials/header.ejs') %> <!-- NOTE THAT THE DIRECTORY CHANGES -->
    <title>Create a Comment</title>
</head>
        
<body>
    THIS IS THE POST DETAIL / COMMENTS.EJS PAGE
<ul>
    <li>    
        <a href="/posts">Return to all Posts</a>
    </li>
    <li>
        <a href="/posts/new">Make a Post</a>
    </li>
</ul>

    <h1>Welcome to Fidget!</h1>
    <h2>The side bar of the internet!</h2>

    <table>
        <thead>
            <th>Post</th>
           
        </thead>
        <tbody>
        
            <tr>
                <td><%= post.title %></td>                  
            </tr>
            <tr>
                <td><%= post.author %></td>                  
            </tr>
        </tbody>
        <table>
            <thead>
                
                <th>Content</th>
            </thead>
            <tbody>
            
                  <tr>
                      
                      <td><%= post.content %></td>
                      <td><%= post.date %></td>
                      
                  </tr>
               
            </tbody>
    </table>

    <!-- Javascript/HTML for hiding edit button, revealing edit menu -->
    <script>
        function editPost() {
            const editWindow = document.getElementById("edit-comment");
            const editButton = document.getElementById("edit-button");
            editWindow.style.display = "block"; 
            editButton.style.display = "none";
        };
    </script>

        <form action='/posts/<%= post._id %>?_method=DELETE' method="POST" class="delete-post"> 
            <br><button type="submit">Delete Post</button>
        </form>
        <br>
        <button onclick="editPost()" id="edit-button">Edit this post</button>
        <br><br>
<!-- action="/posts/<%= post._id %>/update?_method=PUT" -->
<form id='edit-comment' action="/posts/<%= post._id %>?_method=PUT" method="POST" style="display:none" >
    <h4>Edit this Post</h4>
    <input type="text" id = "title" name="title" required value="Title">
    <input type="text" id = "content" name="content" required value="Content">
    <button type ="submit">Submit Changes</button>
 </form>

    
    <form id='add-comment-form' method='POST' action='/posts/<%= post._id %>/comments'>
        <h4>Leave a comment!</h4>
        <textarea name='content'></textarea>
        <div class="center">
        <input type='submit' value='Add comment to Fidget!'>
        </div>
    </form>
    <% if (post.comments.length) { %>
        <table>
            <thead>
                <tr>
                    <th>Comments</th>
                </tr>
            </thead>
            <tbody>
                <% post.comments.forEach(function(c) { %>
                    <tr>
                        <td><%= c.content %> 
                           
  
                        </td>
                        
                    </tr>
               <% }); %>
            </tbody>
        </table>
   <% } else { %>
    <h4>No Comments Yet!</h4>
    <h3>Add a comment why don't ya!</h3>
   <% } %>
   <p><img src="https://www.freeiconspng.com/uploads/high-resolution-fidget-spinner-black-image-17.png" width="50" alt="High Resolution Fidget Spinner Black Image" class="fidget-spinner" /></p>
    
</body>
</html>

<%- include('../partials/footer.ejs') %> <!-- NOTE THAT THE DIRECTORY CHANGES -->